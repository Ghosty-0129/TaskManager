/* Tailwind v4 global styles */
@import "tailwindcss";

/* ------------------------------------------------------------------ */
/* Design tokens                                                      */
/* ------------------------------------------------------------------ */
:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);

  /* Brand palette */
  --color-brand:   #111827; /* near-black */
  --color-brand-2: #4f46e5; /* indigo */
  --color-brand-3: #22d3ee; /* cyan */
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

/* ------------------------------------------------------------------ */
/* Reusable utilities (must be top-level; no nesting)                 */
/* ------------------------------------------------------------------ */
@utility container-app {
  @apply max-w-2xl mx-auto px-4;
}

@utility card {
  @apply rounded-2xl border border-gray-200/60 bg-white/90 shadow-sm backdrop-blur;
}

@utility card-ghost {
  @apply rounded-2xl border border-gray-200/40 bg-white/95 text-[--color-brand];
  /* subtle separation */
  box-shadow: 0 6px 18px rgba(15, 23, 42, 0.50);
  backdrop-filter: blur(6px);
}

@utility btn {
  @apply inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-medium transition
         ring-offset-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-900/50;
}
@utility btn-primary {
  @apply btn bg-[--color-brand] text-white hover:bg-black/90 active:scale-[.98];
}
@utility btn-outline {
  @apply btn border border-gray-300 bg-white hover:bg-gray-50;
}
@utility btn-ghost {
  @apply btn text-gray-700 hover:bg-gray-100;
}

@utility input {
  @apply w-full rounded-xl border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900;
}

@utility badge {
  @apply inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium;
}
@utility badge-green  { @apply badge bg-emerald-100 text-emerald-700; }
@utility badge-gray   { @apply badge bg-gray-100 text-gray-700; }

/* Progress bar */
@utility progress-wrap { @apply w-full h-2 rounded-full bg-gray-200 overflow-hidden; }
@utility progress-bar  { @apply h-full bg-[--color-brand-2] transition-all; }

/* Custom checkbox (base utility only) */
@utility chk {
  @apply relative size-5 appearance-none rounded border border-gray-300 bg-white
         grid place-items-center transition;
}

/* Subtle page background */
@utility page-bg {
  background:
    radial-gradient(1200px 600px at 10% -10%, color-mix(in hsl, var(--color-brand-3) 14%, transparent), transparent 50%),
    radial-gradient(900px 500px at 110% 10%,  color-mix(in hsl, var(--color-brand-2) 12%, transparent), transparent 45%);
}

/* ------------------------------------------------------------------ */
/* Pseudo selectors & state styles (regular CSS, not @utility)        */
/* ------------------------------------------------------------------ */

/* Inputs: placeholder, focus, autofill */
.input::placeholder { color: rgba(15, 23, 42, 0.45); opacity: 1; }

.input:focus {
  outline: none;
  border-color: var(--color-brand-2);
  box-shadow: 0 0 0 6px rgba(79, 70, 229, 0.10);
}

.input:-webkit-autofill,
.input:-webkit-autofill:hover,
.input:-webkit-autofill:focus {
  -webkit-text-fill-color: rgb(17, 24, 39);
  transition: background-color 9999s ease-out 0s;
}

/* Checkbox states */
.chk:checked { @apply border-[--color-brand-2] bg-[--color-brand-2]; }
.chk:checked::after { content: ""; @apply block size-3 bg-white rounded-sm; }

/* Dark mode adjustments (plain CSS classes, not @utility) */
@media (prefers-color-scheme: dark) {
  .card {
    @apply border-gray-800/60;
    background-color: rgba(22,22,22,0.9);
    box-shadow: 0 8px 22px rgba(0,0,0,0.6);
  }

  .card-ghost {
    @apply border-gray-900/40;
    background-color: rgba(10,10,10,0.78);
    color: #f5f5f5;
    box-shadow: 0 6px 22px rgba(0,0,0,0.6);
  }

  .input {
    @apply bg-[rgba(255,255,255,0.05)] border-gray-700 text-gray-100;
  }
  .input::placeholder { color: rgba(255,255,255,0.38); }
  .input:focus { box-shadow: 0 0 0 6px rgba(79, 70, 229, 0.14); }
}

/* ------------------------------------------------------------------ */
/* Base element styles                                                */
/* ------------------------------------------------------------------ */
body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans, Arial, Helvetica, sans-serif);
}

/* ------------------------------------------------------------------ */
/* Fix: outline buttons visibility in dark mode                       */
/* ------------------------------------------------------------------ */
@media (prefers-color-scheme: dark) {
  .btn-outline {
    @apply border-gray-600 bg-transparent text-gray-200 hover:bg-gray-800;
  }

  .btn-ghost {
    @apply text-gray-300 hover:bg-gray-800;
  }
}
